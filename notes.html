<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit"><meta name="author" content="HeZulong"><meta name="keywords" content="何祖龙, hezulong, zulong"><meta name="description" content="何祖龙"><meta name="theme-color" content="#000000"><link rel="icon" href="/logo.png" type="image/svg+xml"><link href="//fonts.googleapis.com/css2?family=Fira+Code&amp;family=Inter:wght@200;400;600&amp;display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="//fonts.googleapis.com/css2?family=Kaisei+Decol:wght@400;500;700&amp;display=swap" rel="stylesheet"><title>Notes - HeZulong</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" async="" crossorigin="" src="/assets/app.8250e82d.js"></script><link rel="modulepreload" href="/assets/vendor.8b079578.js"><link rel="stylesheet" href="/assets/app.c1706c9e.css"><link rel="modulepreload" crossorigin="" href="/assets/notes.a5986490.js"><link rel="modulepreload" crossorigin="" href="/assets/Post.8d318d4e.js"><meta name="description" content="何祖龙的个人网站, hezulong's Portfolio"><meta property="og:title" content="Notes - HeZulong"><meta name="head:count" content="2"></head><body class="font-sans text-gray-700 dark:text-gray-200"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-7ecc8847=""><a href="/" class="w-8 h-8 absolute lg:fixed m-7 select-none outline-none" focusable="false" data-v-7ecc8847=""><div class="bg-accentLight rounded-full w-8 h-8" data-v-7ecc8847=""></div></a><nav class="nav" data-v-7ecc8847=""><div class="spacer" data-v-7ecc8847=""></div><div class="right" data-v-7ecc8847=""><a href="/posts" class="" data-v-7ecc8847=""><span class="<md:hidden" data-v-7ecc8847="">Blog</span><svg style="vertical-align:sub" class="inline md:hidden" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" data-v-7ecc8847=""><path fill="currentColor" d="M26 30H6a2.002 2.002 0 0 1-2-2V4a2.002 2.002 0 0 1 2-2h20a2.002 2.002 0 0 1 2 2v24a2.002 2.002 0 0 1-2 2ZM6 4v24h20V4Z"></path><path fill="currentColor" d="M9 7h11v2H9zm0 5h7v2H9z"></path></svg></a><a href="/talks" class="<md:hidden" data-v-7ecc8847="">Talks </a><a href="/projects" class="" data-v-7ecc8847=""><span class="<md:hidden" data-v-7ecc8847="">Projects</span><svg style="vertical-align:sub" class="inline md:hidden" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" data-v-7ecc8847=""><path fill="currentColor" d="M11 24h10v2H11zm2 4h6v2h-6zm3-26A10 10 0 0 0 6 12a9.19 9.19 0 0 0 3.46 7.62c1 .93 1.54 1.46 1.54 2.38h2c0-1.84-1.11-2.87-2.19-3.86A7.2 7.2 0 0 1 8 12a8 8 0 0 1 16 0a7.2 7.2 0 0 1-2.82 6.14c-1.07 1-2.18 2-2.18 3.86h2c0-.92.53-1.45 1.54-2.39A9.18 9.18 0 0 0 26 12A10 10 0 0 0 16 2z"></path></svg></a><!----><!----><!----></div></nav></header><main class="px-7 py-10"><!--[--><div class="prose m-auto mb-8"><h1 class="mb-0">Notes</h1><!----><p class="opacity-50 !-mt-6 italic">快速笔记 / 小提示</p></div><article><!--[--><div class="prose m-auto"><article><h2 id="less-scss-函数的定义" tabindex="-1">less, scss 函数的定义 <a class="header-anchor" href="#less-scss-函数的定义" aria-hidden="true">#</a></h2><p><em>2022/03/31</em></p><h4 id="less" tabindex="-1">less <a class="header-anchor" href="#less" aria-hidden="true">#</a></h4><p>一个额外的配置:</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-less"><code class="language-less"><span class="token comment">// version: ^4.1.2</span>
<span class="token selector">.vwMixin()</span> <span class="token punctuation">{</span>
<span class="token variable">@function<span class="token punctuation">:</span></span> ~`<span class="token selector">(function()</span> <span class="token punctuation">{</span>
  <span class="token selector">this.vw = function(size, base = 1440)</span> <span class="token punctuation">{</span>
    const raw = size <span class="token operator">/</span> <span class="token punctuation">(</span>base <span class="token operator">/</span> 100<span class="token punctuation">)</span> <span class="token comment">// vw</span>
    return <span class="token string">'calc('</span> <span class="token operator">+</span> raw <span class="token operator">+</span> <span class="token string">'vw - '</span> <span class="token operator">+</span> raw <span class="token operator">/</span> 100 <span class="token operator">+</span> <span class="token string">' * var(--sbw, 0px))'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>`<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
.<span class="token function">vwMixin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// test</span>
<span class="token selector">[test]</span> <span class="token punctuation">{</span>
  <span class="token property">desktop</span><span class="token punctuation">:</span> ~`<span class="token function">vw</span><span class="token punctuation">(</span>60<span class="token punctuation">)</span>`<span class="token punctuation">;</span>
  <span class="token property">mobile</span><span class="token punctuation">:</span> ~`<span class="token function">vw</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 375<span class="token punctuation">)</span>`<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h4 id="scss" tabindex="-1">scss <a class="header-anchor" href="#scss" aria-hidden="true">#</a></h4><pre class="language-scss"><code class="language-scss"><span class="token comment">// version: ^1.49.10</span>
<span class="token keyword">@use</span> <span class="token string">'sass:math'</span> <span class="token module-modifier keyword">as</span> math<span class="token punctuation">;</span>
<span class="token keyword">@function</span> <span class="token function">vw</span><span class="token punctuation">(</span><span class="token variable">$px</span><span class="token punctuation">,</span> <span class="token property"><span class="token variable">$base</span></span><span class="token punctuation">:</span> 1440<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$raw</span></span><span class="token punctuation">:</span> math.<span class="token function">div</span><span class="token punctuation">(</span><span class="token variable">$px</span><span class="token punctuation">,</span> math.<span class="token function">div</span><span class="token punctuation">(</span><span class="token variable">$base</span><span class="token punctuation">,</span> 100<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">@return</span> <span class="token function">calc</span><span class="token punctuation">(</span>#<span class="token punctuation">{</span><span class="token variable">$raw</span> <span class="token operator">*</span> 1vw<span class="token punctuation">}</span> <span class="token operator">-</span> #<span class="token punctuation">{</span><span class="token variable">$raw</span> <span class="token operator">*</span> 0.01<span class="token punctuation">}</span> <span class="token operator">*</span> <span class="token function">var</span><span class="token punctuation">(</span>--sbw<span class="token punctuation">,</span> 0px<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// test</span>
<span class="token selector">[test] </span><span class="token punctuation">{</span>
  <span class="token property">desktop</span><span class="token punctuation">:</span> <span class="token function">vw</span><span class="token punctuation">(</span>60<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">mobile</span><span class="token punctuation">:</span> <span class="token function">vw</span><span class="token punctuation">(</span>60<span class="token punctuation">,</span> 375<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></article><article><h2 id="git-查询代码行数" tabindex="-1">Git 查询代码行数 <a class="header-anchor" href="#git-查询代码行数" aria-hidden="true">#</a></h2><p><em>2022/02/23</em></p><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> log  --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{ add += $1; subs += $2; loc += $1 - $2 } END { printf "added lines: %s, removed lines: %s, total lines: %s\n", add, subs, loc }'</span> -
</code></pre></article><article><h2 id="无限-debugger" tabindex="-1">无限 debugger <a class="header-anchor" href="#无限-debugger" aria-hidden="true">#</a></h2><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">Function</span><span class="token punctuation">(</span><span class="token string">'Function(arguments[0]+"'</span> <span class="token operator">+</span> a <span class="token operator">+</span> <span class="token string">'")()'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'bugger'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'de'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></article><article><h2 id="一个简单的-dom-resize-监听器" tabindex="-1">一个简单的 dom resize 监听器 <a class="header-anchor" href="#一个简单的-dom-resize-监听器" aria-hidden="true">#</a></h2><h4 id="html" tabindex="-1">html <a class="header-anchor" href="#html" aria-hidden="true">#</a></h4><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fake-element<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><h4 id="css" tabindex="-1">css <a class="header-anchor" href="#css" aria-hidden="true">#</a></h4><pre class="language-css"><code class="language-css"><span class="token selector">.fake-element</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token comment">/* 需要指定一个非 static 属性 */</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token selector">.resize-observer</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h4 id="javascript" tabindex="-1">javascript <a class="header-anchor" href="#javascript" aria-hidden="true">#</a></h4><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> userAgent <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isIE <span class="token operator">=</span> <span class="token punctuation">(</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'trident'</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">||</span> userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'msie'</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isEdge <span class="token operator">=</span> <span class="token punctuation">(</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'Edge/'</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isEdgeOrIE <span class="token operator">=</span> isIE <span class="token operator">||</span> isEdge<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">resizeHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">createResize</span> <span class="token operator">=</span> <span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'resize-observer'</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/html'</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-hidden'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> win <span class="token operator">=</span> obj<span class="token punctuation">.</span>contentDocument<span class="token punctuation">.</span>defaultView<span class="token punctuation">;</span>
    win<span class="token punctuation">.</span>onresize <span class="token operator">=</span> <span class="token function">_resizeHandler</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// IE: Does not like that this happens before, even if it is also added after.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isEdgeOrIE<span class="token punctuation">)</span> <span class="token punctuation">{</span> obj<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token string">'about:blank'</span> <span class="token punctuation">}</span>
  element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// IE: This must occur after adding the object to the DOM.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isEdgeOrIE<span class="token punctuation">)</span> <span class="token punctuation">{</span> obj<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token string">'about:blank'</span> <span class="token punctuation">}</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></article></div><!--]--></article><div class="prose m-auto mt-8 mb-8"><a href="/" class="font-mono no-underline opacity-50 hover:opacity-75">cd ..</a></div><!--]--><footer class="prose m-auto py-20 flex"><span class="text-sm">2018 - PRESENT © HeZulong</span><div class="flex-auto"></div></footer></main><!--]--></div><script></script></body></html>